<view class="points-page">
  <!-- é¡¶éƒ¨è¿”å›æ  -->
  <view class="top-bar">
    <view class="back-button" bindtap="goBack">
      <text>â†</text>
    </view>
    <view class="top-title">ç§¯åˆ†ç®¡ç†</view>
    <view class="top-placeholder"></view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input"
        type="text"
        placeholder="æœç´¢ç”¨æˆ·åå­—ã€å·¥å·æˆ–æ‰‹æœºå·"
        value="{{searchText}}"
        bindinput="handleSearch"
      />
    </view>
  </view>

  <!-- ç§¯åˆ†åˆ—è¡¨ -->
  <view class="points-list">
    <view class="point-card" wx:for="{{filteredPoints}}" wx:key="id" bindtap="goPointDetail" data-user-id="{{item.id}}">
      <view class="card-header">
        <view class="user-avatar">{{item.name.charAt(0)}}</view>
        <view class="user-basic">
          <view class="user-name">{{item.name}}</view>
          <view class="user-workno">å·¥å·ï¼š{{item.workNo}}</view>
        </view>
        <view class="points-badge">
          <text class="points-value">{{item.points}}</text>
          <text class="points-label">ç§¯åˆ†</text>
        </view>
      </view>

      <view class="card-body">
        <view class="info-row">
          <text class="info-label">æ‰‹æœºå·</text>
          <text class="info-value">{{item.phone}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">è§’è‰²</text>
          <text class="role-badge {{item.role}}">{{item.role === 'employee' ? 'å‘˜å·¥' : item.role === 'manager' ? 'åº—é•¿' : 'ç®¡ç†å‘˜'}}</text>
        </view>
      </view>

      <view class="card-footer">
        <view class="arrow">â†’</view>
      </view>
    </view>

    <view class="empty-state" wx:if="{{!filteredPoints.length && !loading}}">
      <text class="empty-icon">ğŸ¯</text>
      <text class="empty-text">æš‚æ— ç§¯åˆ†æ•°æ®</text>
    </view>

    <view class="loading-more" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <view class="no-more" wx:if="{{!hasMore && filteredPoints.length > 0 && !loading}}">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </view>
</view>

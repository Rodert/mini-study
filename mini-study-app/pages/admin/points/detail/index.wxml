<view class="detail-page">
  <!-- é¡¶éƒ¨è¿”å›æ  -->
  <view class="top-bar">
    <view class="back-button" bindtap="goBack">
      <text>â†</text>
    </view>
    <view class="top-title">ç§¯åˆ†æ˜ç»†</view>
    <view class="top-placeholder"></view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯å’Œç§¯åˆ†æ€»æ•° -->
  <view class="user-info-card">
    <view class="user-avatar">{{user.name ? user.name.charAt(0) : 'U'}}</view>
    <view class="user-info">
      <view class="user-name">{{user.name || 'â€”'}}</view>
      <view class="user-meta">
        <text class="meta-item">å·¥å·ï¼š{{user.workNo || 'â€”'}}</text>
        <text class="meta-divider">|</text>
        <text class="meta-item">æ‰‹æœºï¼š{{user.phone || 'â€”'}}</text>
      </view>
    </view>
    <view class="points-summary">
      <view class="points-label">æ€»ç§¯åˆ†</view>
      <view class="points-value">{{totalPoints}}</view>
    </view>
  </view>

  <!-- ç§¯åˆ†æ˜ç»†åˆ—è¡¨ -->
  <view class="transactions-list">
    <view class="section-header">
      <text class="section-icon">ğŸ“‹</text>
      <text class="section-title">ç§¯åˆ†æ˜ç»†</text>
    </view>

    <view class="transaction-item" wx:for="{{transactions}}" wx:key="id">
      <view class="transaction-left">
        <view class="transaction-type">
          <text class="type-icon">{{item.change > 0 ? 'â•' : 'â–'}}</text>
          <text class="type-text">{{item.sourceText}}</text>
        </view>
        <view class="transaction-desc" wx:if="{{item.description}}">
          {{item.description}}
        </view>
        <view class="transaction-memo" wx:if="{{item.memo}}">
          {{item.memo}}
        </view>
        <view class="transaction-time">
          {{item.createdAtText}}
        </view>
      </view>
      <view class="transaction-right">
        <view class="transaction-points {{item.change > 0 ? 'positive' : 'negative'}}">
          {{item.change > 0 ? '+' : ''}}{{item.change}}
        </view>
      </view>
    </view>

    <view class="empty-state" wx:if="{{!transactions.length && !loading}}">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">æš‚æ— ç§¯åˆ†æ˜ç»†</text>
    </view>

    <view class="loading-more" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <view class="no-more" wx:if="{{!hasMore && transactions.length > 0 && !loading}}">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </view>
</view>


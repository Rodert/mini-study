<view class="detail-page">
  <!-- é¡¶éƒ¨è¿”å›æ  -->
  <view class="top-bar">
    <view class="back-button" bindtap="goBack">
      <text>â†</text>
    </view>
    <view class="top-title">å‘˜å·¥è¯¦æƒ…</view>
    <view class="top-placeholder"></view>
  </view>

  <!-- å‘˜å·¥ä¿¡æ¯ -->
  <view class="form-container">
    <!-- åŸºæœ¬ä¿¡æ¯ -->
    <view class="form-section">
      <view class="section-header">
        <text class="section-icon">ğŸ‘¤</text>
        <view class="section-info">
          <view class="section-title">åŸºæœ¬ä¿¡æ¯</view>
        </view>
      </view>

      <view class="info-display">
        <view class="info-row">
          <view class="info-label">å§“å</view>
          <view class="info-value">{{employee.name}}</view>
        </view>
        <view class="info-row">
          <view class="info-label">å·¥å·</view>
          <view class="info-value">{{employee.username}}</view>
        </view>
        <view class="info-row">
          <view class="info-label">æ‰‹æœºå·</view>
          <view class="info-value">{{employee.mobile}}</view>
        </view>
        <view class="info-row" wx:if="{{employee.managers && employee.managers.length}}">
          <view class="info-label">æ‰€å±åº—é•¿</view>
          <view class="info-value manager-tags">
            <view class="tag" wx:for="{{employee.managers}}" wx:key="id">
              {{item.name || item.work_no}} ({{item.work_no}})
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- è§’è‰²ä¿®æ”¹ -->
    <view class="form-section">
      <view class="section-header">
        <text class="section-icon">ğŸ­</text>
        <view class="section-info">
          <view class="section-title">è§’è‰²</view>
          <view class="section-desc">ä¿®æ”¹ç”¨æˆ·è§’è‰²</view>
        </view>
      </view>

      <view class="role-options">
        <view 
          class="role-option {{employee.role === 'employee' ? 'selected' : ''}}"
          bindtap="selectRole"
          data-role="employee"
        >
          <view class="role-radio">
            <text wx:if="{{employee.role === 'employee'}}">â—</text>
          </view>
          <view class="role-info">
            <view class="role-name">å‘˜å·¥</view>
            <view class="role-desc">æ™®é€šå‘˜å·¥</view>
          </view>
        </view>

        <view 
          class="role-option {{employee.role === 'manager' ? 'selected' : ''}}"
          bindtap="selectRole"
          data-role="manager"
        >
          <view class="role-radio">
            <text wx:if="{{employee.role === 'manager'}}">â—</text>
          </view>
          <view class="role-info">
            <view class="role-name">åº—é•¿</view>
            <view class="role-desc">ç®¡ç†è€…</view>
          </view>
        </view>

        <view 
          class="role-option {{employee.role === 'admin' ? 'selected' : ''}}"
          bindtap="selectRole"
          data-role="admin"
        >
          <view class="role-radio">
            <text wx:if="{{employee.role === 'admin'}}">â—</text>
          </view>
          <view class="role-info">
            <view class="role-name">ç®¡ç†å‘˜</view>
            <view class="role-desc">ç³»ç»Ÿç®¡ç†å‘˜</view>
          </view>
        </view>
      </view>
    </view>

    <!-- åº—é•¿ç»‘å®š -->
    <view class="form-section" wx:if="{{employee.role === 'employee'}}">
      <view class="section-header">
        <text class="section-icon">ğŸ‘”</text>
        <view class="section-info">
          <view class="section-title">æ‰€å±åº—é•¿</view>
          <view class="section-desc">å¯å¤šé€‰ï¼Œç»‘å®šå‘˜å·¥å±äºå“ªä¸ªåº—é•¿</view>
        </view>
      </view>

      <view class="manager-list">
        <view 
          class="manager-item {{selectedManagerIds.indexOf(manager.id) > -1 ? 'selected' : ''}}"
          wx:for="{{managers}}"
          wx:for-item="manager"
          wx:key="id"
          data-manager-id="{{manager.id}}"
          bindtap="handleManagerSelect"
        >
          <view class="manager-checkbox">
            <text wx:if="{{selectedManagerIds.indexOf(manager.id) > -1}}">âœ“</text>
          </view>
          <view class="manager-info">
            <view class="manager-name">{{manager.name || manager.workNo}}</view>
            <view class="manager-store">{{manager.store || manager.workNo}}</view>
          </view>
        </view>
      </view>

      <view class="form-hint">å·²é€‰æ‹© {{selectedManagerIds.length}} ä¸ªåº—é•¿</view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="button-group">
    <button class="btn-save" bindtap="handleSave">ä¿å­˜ä¿®æ”¹</button>
    <button class="btn-cancel" bindtap="goBack">å–æ¶ˆ</button>
  </view>
</view>

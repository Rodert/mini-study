<view class="employees-page">
  <!-- é¡¶éƒ¨è¿”å›æ  -->
  <view class="top-bar">
    <view class="back-button" bindtap="goBack">
      <text>â†</text>
    </view>
    <view class="top-title">å‘˜å·¥ç®¡ç†</view>
    <view class="top-actions">
      <view class="action-button" bindtap="showAddMenu">
        <text>+</text>
      </view>
    </view>
  </view>

  <!-- æ·»åŠ èœå• -->
  <view class="add-menu {{showMenu ? 'show' : ''}}" wx:if="{{showMenu}}" catchtap="hideAddMenu">
    <view class="menu-content" catchtap="stopPropagation">
      <view class="menu-item" bindtap="goAddEmployee">
        <text class="menu-icon">ğŸ‘¤</text>
        <text class="menu-text">æ–°å¢å‘˜å·¥</text>
      </view>
      <view class="menu-item" bindtap="goAddManager">
        <text class="menu-icon">ğŸ‘”</text>
        <text class="menu-text">æ–°å¢åº—é•¿</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input"
        type="text"
        placeholder="æœç´¢å‘˜å·¥åå­—æˆ–æ‰‹æœºå·"
        value="{{searchText}}"
        bindinput="handleSearch"
      />
    </view>
  </view>

  <!-- å‘˜å·¥åˆ—è¡¨ -->
  <view class="employees-list">
    <view class="employee-card" wx:for="{{filteredEmployees}}" wx:key="id" bindtap="goEmployeeDetail" data-user-id="{{item.id}}">
      <view class="card-header">
        <view class="employee-avatar">{{item.name.charAt(0)}}</view>
        <view class="employee-basic">
          <view class="employee-name">{{item.name}}</view>
          <view class="employee-username">å·¥å·ï¼š{{item.username}}</view>
        </view>
      </view>

      <view class="card-body">
        <view class="info-row">
          <text class="info-label">æ‰‹æœºå·</text>
          <text class="info-value">{{item.mobile}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">è§’è‰²</text>
          <text class="role-badge {{item.role}}">{{item.role === 'employee' ? 'å‘˜å·¥' : item.role === 'manager' ? 'åº—é•¿' : 'ç®¡ç†å‘˜'}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">æ‰€å±åº—é•¿</text>
          <view class="manager-tags">
            <view class="tag" wx:for="{{item.managers}}" wx:key="id">
              {{item.name || item.workNo}}
            </view>
          </view>
        </view>
      </view>

      <view class="card-footer">
        <view class="arrow">â†’</view>
      </view>
    </view>

    <view class="empty-state" wx:if="{{!filteredEmployees.length}}">
      <text class="empty-icon">ğŸ˜•</text>
      <text class="empty-text">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å‘˜å·¥</text>
    </view>
  </view>
</view>

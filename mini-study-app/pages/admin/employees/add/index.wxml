<view class="add-employee-page">
  <!-- 顶部栏 -->
  <view class="top-bar">
    <view class="back-button" bindtap="goBack">
      <text>←</text>
    </view>
    <view class="top-title">新增员工</view>
    <view class="top-placeholder"></view>
  </view>

  <!-- 表单 -->
  <view class="form-container">
    <view class="form-section">
      <view class="section-title">基本信息</view>
      
      <!-- 工号 -->
      <view class="form-item">
        <view class="form-label">
          <text class="required">*</text>
          <text>工号</text>
        </view>
        <input
          class="form-input {{errors.work_no ? 'error' : ''}}"
          type="text"
          placeholder="请输入工号（至少2位）"
          value="{{form.work_no}}"
          data-field="work_no"
          bindinput="handleInput"
          maxlength="50"
        />
        <view class="error-text" wx:if="{{errors.work_no}}">{{errors.work_no}}</view>
      </view>

      <!-- 姓名 -->
      <view class="form-item">
        <view class="form-label">
          <text class="required">*</text>
          <text>姓名</text>
        </view>
        <input
          class="form-input {{errors.name ? 'error' : ''}}"
          type="text"
          placeholder="请输入姓名"
          value="{{form.name}}"
          data-field="name"
          bindinput="handleInput"
          maxlength="100"
        />
        <view class="error-text" wx:if="{{errors.name}}">{{errors.name}}</view>
      </view>

      <!-- 手机号 -->
      <view class="form-item">
        <view class="form-label">手机号</view>
        <input
          class="form-input {{errors.phone ? 'error' : ''}}"
          type="number"
          placeholder="请输入手机号（可选）"
          value="{{form.phone}}"
          data-field="phone"
          bindinput="handleInput"
          maxlength="11"
        />
        <view class="error-text" wx:if="{{errors.phone}}">{{errors.phone}}</view>
      </view>

      <!-- 密码 -->
      <view class="form-item">
        <view class="form-label">
          <text class="required">*</text>
          <text>密码</text>
        </view>
        <input
          class="form-input {{errors.password ? 'error' : ''}}"
          type="password"
          placeholder="请输入密码（至少6位）"
          value="{{form.password}}"
          data-field="password"
          bindinput="handleInput"
          maxlength="50"
        />
        <view class="error-text" wx:if="{{errors.password}}">{{errors.password}}</view>
      </view>
    </view>

    <!-- 店长绑定 -->
    <view class="form-section">
      <view class="section-title">绑定店长（可选）</view>
      <view class="section-desc">选择该员工所属的店长，可多选</view>
      
      <view class="managers-list">
        <view
          class="manager-item {{item.selected ? 'selected' : ''}}"
          wx:for="{{managers}}"
          wx:key="id"
          bindtap="toggleManager"
          data-manager-id="{{item.id}}"
        >
          <view class="manager-info">
            <view class="manager-name">{{item.name}}</view>
            <view class="manager-workno">工号：{{item.work_no}}</view>
          </view>
          <view class="check-icon" wx:if="{{item.selected}}">✓</view>
        </view>
      </view>

      <view class="empty-managers" wx:if="{{!managers.length}}">
        <text>暂无店长</text>
      </view>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-container">
    <button
      class="submit-button"
      bindtap="handleSubmit"
      loading="{{loading}}"
      disabled="{{loading}}"
    >
      {{loading ? '创建中...' : '创建员工'}}
    </button>
  </view>
</view>


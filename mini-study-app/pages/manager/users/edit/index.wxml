<view class="edit-user-page">
  <!-- é¡¶éƒ¨è¿”å›æ  -->
  <view class="top-bar">
    <view class="back-button" bindtap="goBack">
      <text>â†</text>
    </view>
    <view class="top-title">ç¼–è¾‘ç”¨æˆ·</view>
    <view class="top-placeholder"></view>
  </view>

  <!-- ç¼–è¾‘è¡¨å• -->
  <view class="form-container">
    <!-- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ -->
    <view class="form-section">
      <view class="section-header">
        <text class="section-icon">ğŸ‘¤</text>
        <view class="section-info">
          <view class="section-title">åŸºæœ¬ä¿¡æ¯</view>
        </view>
      </view>

      <view class="info-row">
        <view class="info-label">å§“å</view>
        <view class="info-value">{{user.name}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">å·¥å·</view>
        <view class="info-value">{{user.username}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">æ‰‹æœºå·</view>
        <view class="info-value">{{user.mobile}}</view>
      </view>
    </view>

    <!-- è§’è‰²ä¿®æ”¹ -->
    <view class="form-section">
      <view class="section-header">
        <text class="section-icon">ğŸ­</text>
        <view class="section-info">
          <view class="section-title">è§’è‰²</view>
          <view class="section-desc">ä¿®æ”¹ç”¨æˆ·è§’è‰²</view>
        </view>
      </view>

      <view class="role-options">
        <view 
          class="role-option {{user.role === 'employee' ? 'selected' : ''}}"
          bindtap="selectRole"
          data-role="employee"
        >
          <view class="role-radio">
            <text wx:if="{{user.role === 'employee'}}">â—</text>
          </view>
          <view class="role-info">
            <view class="role-name">å‘˜å·¥</view>
            <view class="role-desc">æ™®é€šå‘˜å·¥</view>
          </view>
        </view>

        <view 
          class="role-option {{user.role === 'manager' ? 'selected' : ''}}"
          bindtap="selectRole"
          data-role="manager"
        >
          <view class="role-radio">
            <text wx:if="{{user.role === 'manager'}}">â—</text>
          </view>
          <view class="role-info">
            <view class="role-name">åº—é•¿</view>
            <view class="role-desc">é—¨åº—ç®¡ç†è€…</view>
          </view>
        </view>

        <view 
          class="role-option {{user.role === 'admin' ? 'selected' : ''}}"
          bindtap="selectRole"
          data-role="admin"
        >
          <view class="role-radio">
            <text wx:if="{{user.role === 'admin'}}">â—</text>
          </view>
          <view class="role-info">
            <view class="role-name">ç®¡ç†å‘˜</view>
            <view class="role-desc">ç³»ç»Ÿç®¡ç†å‘˜</view>
          </view>
        </view>
      </view>
    </view>

    <!-- åº—é•¿ç»‘å®š -->
    <view class="form-section" wx:if="{{user.role === 'employee'}}">
      <view class="section-header">
        <text class="section-icon">ğŸ‘”</text>
        <view class="section-info">
          <view class="section-title">æ‰€å±åº—é•¿</view>
          <view class="section-desc">å¯å¤šé€‰ï¼Œç»‘å®šå‘˜å·¥å±äºå“ªä¸ªåº—é•¿</view>
        </view>
      </view>

      <view class="manager-list">
        <view 
          class="manager-item {{selectedManagerIds.indexOf(manager.id) > -1 ? 'selected' : ''}}"
          wx:for="{{managers}}"
          wx:for-item="manager"
          wx:key="id"
          data-manager-id="{{manager.id}}"
          bindtap="handleManagerSelect"
        >
          <view class="manager-checkbox">
            <text wx:if="{{selectedManagerIds.indexOf(manager.id) > -1}}">âœ“</text>
          </view>
          <view class="manager-info">
            <view class="manager-name">{{manager.name || manager.workNo || manager.work_no}}</view>
            <view class="manager-store">{{manager.store}}</view>
          </view>
        </view>
      </view>

      <view class="form-hint">å·²é€‰æ‹© {{selectedManagerIds.length}} ä¸ªåº—é•¿</view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="button-group">
    <button class="btn-save" bindtap="handleSave">ä¿å­˜ä¿®æ”¹</button>
    <button class="btn-cancel" bindtap="goBack">å–æ¶ˆ</button>
  </view>
</view>

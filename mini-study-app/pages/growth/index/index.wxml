<view class="growth-page">
  <view class="top-bar">
    <view class="top-title">æˆé•¿åœˆ</view>
  </view>

  <view class="search-bar">
    <view class="search-input-wrapper">
      <text class="search-icon">ğŸ”</text>
      <input
        class="search-input"
        type="text"
        placeholder="æœç´¢æˆé•¿åœˆå†…å®¹"
        value="{{keyword}}"
        bindinput="handleSearchInput"
        confirm-type="search"
        bindconfirm="handleSearchConfirm"
      />
    </view>
  </view>

  <view class="manager-actions" wx:if="{{user.role === 'manager'}}">
    <button class="btn-secondary" bindtap="goMyPosts">æˆ‘çš„æˆé•¿åœˆ</button>
  </view>

  <scroll-view class="post-list" scroll-y="true">
    <view class="post-card" wx:for="{{posts}}" wx:key="id">
      <view class="post-header">
        <view class="post-header-main">
          <view class="avatar">{{item.avatarText}}</view>
          <view class="post-header-info">
            <view class="publisher-name">{{item.publisherName}}</view>
            <view class="post-meta">{{item.createdAtText}}</view>
          </view>
        </view>
        <button class="btn-copy-small" data-index="{{index}}" bindtap="handleCopyAndDownload">
          <text class="btn-copy-icon">ğŸ“‹</text>
        </button>
      </view>
      <view class="post-content">{{item.content}}</view>
      <view class="image-grid" wx:if="{{item.images && item.images.length}}">
        <view
          class="post-image-wrapper"
          wx:for="{{item.images}}"
          wx:for-index="imgIndex"
          wx:key="{{imgIndex}}"
          data-post-index="{{index}}"
          data-image-index="{{imgIndex}}"
          bindtap="handlePreviewImage"
        >
          <image
            class="post-image"
            src="{{item}}"
            mode="aspectFill"
          />
        </view>
      </view>
    </view>

    <view class="empty-state" wx:if="{{!loading && (!posts || !posts.length)}}">
      <text>æš‚æ— æˆé•¿åœˆåŠ¨æ€</text>
    </view>
  </scroll-view>
</view>

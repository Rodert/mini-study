basePath: /api/v1
definitions:
  dto.AdminCreateBannerRequest:
    properties:
      end_at:
        description: 结束时间
        example: "2024-12-31T23:59:59Z"
        type: string
      image_url:
        description: 图片URL
        example: https://example.com/banner.jpg
        type: string
      link_url:
        description: 跳转链接
        example: https://example.com/promotion
        type: string
      sort_order:
        description: 排序序号
        example: 1
        type: integer
      start_at:
        description: 开始时间
        example: "2024-01-01T00:00:00Z"
        type: string
      status:
        description: 是否启用
        example: true
        type: boolean
      title:
        description: 轮播图标题
        example: 春季促销活动
        maxLength: 255
        minLength: 1
        type: string
      visible_roles:
        description: 可见角色：employee(员工) manager(店长) both(全部)
        enum:
        - employee
        - manager
        - both
        example: both
        type: string
    required:
    - image_url
    - link_url
    - title
    type: object
  dto.AdminCreateContentRequest:
    properties:
      category_id:
        description: 分类ID
        example: 1
        type: integer
      cover_url:
        description: 封面图片URL
        example: https://example.com/cover.jpg
        type: string
      duration_seconds:
        description: 视频时长（秒）
        example: 3600
        type: integer
      file_path:
        description: 文件存储路径
        example: /uploads/video.mp4
        type: string
      status:
        description: 状态：draft(草稿) published(已发布)
        enum:
        - draft
        - published
        example: published
        type: string
      summary:
        description: 内容摘要
        example: 本视频介绍产品核心功能
        type: string
      title:
        description: 内容标题
        example: 产品培训视频
        maxLength: 255
        minLength: 1
        type: string
      type:
        description: 内容类型：doc(文档) 或 video(视频)
        enum:
        - doc
        - video
        example: video
        type: string
      visible_roles:
        description: 可见角色：employee(员工) manager(店长) both(全部)
        enum:
        - employee
        - manager
        - both
        example: both
        type: string
    required:
    - category_id
    - file_path
    - title
    - type
    type: object
  dto.AdminCreateEmployeeRequest:
    properties:
      manager_ids:
        description: 店长工号列表
        example:
        - M001
        - M002
        items:
          type: string
        type: array
      name:
        description: 姓名
        example: 张三
        maxLength: 100
        type: string
      password:
        description: 密码（至少6位）
        example: "123456"
        minLength: 6
        type: string
      phone:
        description: 手机号
        example: "13800138000"
        maxLength: 20
        type: string
      work_no:
        description: 工号
        example: E001
        maxLength: 50
        minLength: 2
        type: string
    required:
    - manager_ids
    - name
    - password
    - work_no
    type: object
  dto.AdminCreateManagerRequest:
    properties:
      name:
        description: 姓名
        example: 李店长
        maxLength: 100
        type: string
      password:
        description: 密码（至少6位）
        example: "123456"
        minLength: 6
        type: string
      phone:
        description: 手机号
        example: "13800138000"
        maxLength: 20
        type: string
      work_no:
        description: 工号
        example: M001
        maxLength: 50
        minLength: 2
        type: string
    required:
    - name
    - password
    - work_no
    type: object
  dto.AdminExamQuestionOption:
    properties:
      content:
        type: string
      is_correct:
        type: boolean
      label:
        type: string
      sort_order:
        type: integer
    required:
    - content
    - label
    type: object
  dto.AdminExamQuestionUpsert:
    properties:
      analysis:
        type: string
      options:
        items:
          $ref: '#/definitions/dto.AdminExamQuestionOption'
        minItems: 2
        type: array
      score:
        minimum: 1
        type: integer
      stem:
        type: string
      type:
        enum:
        - single
        - multiple
        type: string
    required:
    - options
    - score
    - stem
    - type
    type: object
  dto.AdminExamUpsertRequest:
    properties:
      description:
        type: string
      pass_score:
        minimum: 0
        type: integer
      questions:
        items:
          $ref: '#/definitions/dto.AdminExamQuestionUpsert'
        minItems: 1
        type: array
      status:
        enum:
        - draft
        - published
        - archived
        type: string
      target_role:
        enum:
        - employee
        - manager
        - all
        type: string
      time_limit_minutes:
        minimum: 0
        type: integer
      title:
        type: string
    required:
    - pass_score
    - questions
    - title
    type: object
  dto.AdminUpdateBannerRequest:
    properties:
      end_at:
        description: 结束时间
        example: "2024-12-31T23:59:59Z"
        type: string
      image_url:
        description: 图片URL
        example: https://example.com/banner.jpg
        type: string
      link_url:
        description: 跳转链接
        example: https://example.com/promotion
        type: string
      sort_order:
        description: 排序序号
        example: 1
        type: integer
      start_at:
        description: 开始时间
        example: "2024-01-01T00:00:00Z"
        type: string
      status:
        description: 是否启用
        example: true
        type: boolean
      title:
        description: 轮播图标题
        example: 春季促销活动(更新)
        maxLength: 255
        minLength: 1
        type: string
      visible_roles:
        description: 可见角色：employee(员工) manager(店长) both(全部)
        enum:
        - employee
        - manager
        - both
        example: both
        type: string
    type: object
  dto.AdminUpdateContentRequest:
    properties:
      category_id:
        description: 分类ID
        example: 1
        type: integer
      cover_url:
        description: 封面图片URL
        example: https://example.com/cover.jpg
        type: string
      duration_seconds:
        description: 视频时长（秒）
        example: 3600
        type: integer
      file_path:
        description: 文件存储路径
        example: /uploads/video.mp4
        type: string
      status:
        description: 状态：draft(草稿) published(已发布) offline(下线)
        enum:
        - draft
        - published
        - offline
        example: published
        type: string
      summary:
        description: 内容摘要
        example: 本视频介绍产品核心功能
        type: string
      title:
        description: 内容标题
        example: 产品培训视频(更新)
        maxLength: 255
        minLength: 1
        type: string
      type:
        description: 内容类型：doc(文档) 或 video(视频)
        enum:
        - doc
        - video
        example: video
        type: string
      visible_roles:
        description: 可见角色：employee(员工) manager(店长) both(全部)
        enum:
        - employee
        - manager
        - both
        example: both
        type: string
    type: object
  dto.AdminUpdateEmployeeManagersRequest:
    properties:
      manager_ids:
        description: 店长工号列表
        example:
        - M001
        - M002
        items:
          type: string
        type: array
    required:
    - manager_ids
    type: object
  dto.AdminUpdateUserRoleRequest:
    properties:
      role:
        description: 目标角色
        enum:
        - employee
        - manager
        - admin
        example: manager
        type: string
    required:
    - role
    type: object
  dto.AdminUserResponse:
    properties:
      id:
        description: 用户ID
        example: 1
        type: integer
      manager_ids:
        description: 绑定的店长ID列表
        items:
          type: integer
        type: array
      managers:
        description: 店长详情
        items:
          $ref: '#/definitions/dto.ManagerBrief'
        type: array
      name:
        description: 姓名
        example: 张三
        type: string
      phone:
        description: 手机号
        example: "13800138000"
        type: string
      role:
        description: 角色：employee(员工) manager(店长) admin(管理员)
        example: employee
        type: string
      status:
        description: 状态：true(启用) false(禁用)
        example: true
        type: boolean
      work_no:
        description: 工号
        example: E001
        type: string
    type: object
  dto.BannerResponse:
    properties:
      end_at:
        description: 结束时间
        example: "2024-12-31T23:59:59Z"
        type: string
      id:
        description: 轮播图ID
        example: 1
        type: integer
      image_url:
        description: 图片URL
        example: https://example.com/banner.jpg
        type: string
      link_url:
        description: 跳转链接
        example: https://example.com/promotion
        type: string
      sort_order:
        description: 排序序号
        example: 1
        type: integer
      start_at:
        description: 开始时间
        example: "2024-01-01T00:00:00Z"
        type: string
      status:
        description: 是否启用
        example: true
        type: boolean
      title:
        description: 轮播图标题
        example: 春季促销活动
        type: string
      visible_roles:
        description: 可见角色：employee(员工) manager(店长) both(全部)
        example: both
        type: string
    type: object
  dto.ContentCategoryResponse:
    properties:
      count:
        description: 该分类下已发布且对当前用户可见的课程数量
        example: 5
        type: integer
      id:
        description: 分类ID
        example: 1
        type: integer
      name:
        description: 分类名称
        example: 产品培训
        type: string
      role_scope:
        description: 可见角色范围：employee(员工) manager(店长) both(全部)
        example: both
        type: string
      sort_order:
        description: 排序序号
        example: 1
        type: integer
    type: object
  dto.ContentCompletionStatsResponse:
    properties:
      completed_count:
        description: 已完成学习的用户数量
        example: 15
        type: integer
      completion_rate:
        description: 完成率（百分比）
        example: 50
        type: number
      content_id:
        description: 内容ID
        example: 1
        type: integer
      content_title:
        description: 内容标题
        example: 产品培训视频
        type: string
      total_count:
        description: 已开始学习的用户总数
        example: 30
        type: integer
    type: object
  dto.ContentResponse:
    properties:
      category_id:
        description: 分类ID
        example: 1
        type: integer
      category_name:
        description: 分类名称
        example: 产品培训
        type: string
      cover_url:
        description: 封面图片URL
        example: https://example.com/cover.jpg
        type: string
      duration_seconds:
        description: 视频时长（秒）
        example: 3600
        type: integer
      file_path:
        description: 文件存储路径
        example: /uploads/video.mp4
        type: string
      id:
        description: 内容ID
        example: 1
        type: integer
      publish_at:
        description: 发布时间
        example: "2024-01-01T00:00:00Z"
        type: string
      status:
        description: 状态：draft(草稿) published(已发布) offline(下线)
        example: published
        type: string
      summary:
        description: 内容摘要
        example: 本视频介绍产品核心功能
        type: string
      title:
        description: 内容标题
        example: 产品培训视频
        type: string
      type:
        description: 内容类型：doc(文档) 或 video(视频)
        example: video
        type: string
      visible_roles:
        description: 可见角色：employee(员工) manager(店长) both(全部)
        example: both
        type: string
    type: object
  dto.EmployeeLatestExamResult:
    properties:
      exam_id:
        type: integer
      exam_title:
        type: string
      pass:
        type: boolean
      score:
        type: integer
      submitted_at:
        type: string
    type: object
  dto.EmployeeLearningProgress:
    properties:
      completed:
        type: integer
      pending:
        type: integer
      percent:
        type: integer
      total:
        type: integer
    type: object
  dto.ExamAnswerReview:
    properties:
      correct_option_ids:
        items:
          type: integer
        type: array
      is_correct:
        type: boolean
      obtained_score:
        type: integer
      question_id:
        type: integer
      score:
        type: integer
      selected_option_ids:
        items:
          type: integer
        type: array
      stem:
        type: string
      type:
        type: string
    type: object
  dto.ExamDetailQuestion:
    properties:
      analysis:
        description: Only for admin
        type: string
      id:
        type: integer
      options:
        items:
          $ref: '#/definitions/dto.ExamDetailQuestionOption'
        type: array
      score:
        type: integer
      stem:
        type: string
      type:
        type: string
    type: object
  dto.ExamDetailQuestionOption:
    properties:
      content:
        type: string
      id:
        type: integer
      is_correct:
        description: Only for admin
        type: boolean
      label:
        type: string
    type: object
  dto.ExamDetailResponse:
    properties:
      description:
        type: string
      id:
        type: integer
      pass_score:
        type: integer
      question_count:
        type: integer
      questions:
        items:
          $ref: '#/definitions/dto.ExamDetailQuestion'
        type: array
      time_limit_minutes:
        type: integer
      title:
        type: string
      total_score:
        type: integer
    type: object
  dto.ExamListItem:
    properties:
      attempt_status:
        type: string
      description:
        type: string
      id:
        type: integer
      last_passed:
        type: boolean
      last_score:
        type: integer
      last_submitted_at:
        type: string
      pass_score:
        type: integer
      question_count:
        type: integer
      status:
        type: string
      time_limit_minutes:
        type: integer
      title:
        type: string
      total_score:
        type: integer
    type: object
  dto.ExamResultSummary:
    properties:
      attempt_id:
        type: integer
      exam_id:
        type: integer
      exam_title:
        type: string
      pass:
        type: boolean
      pass_score:
        type: integer
      score:
        type: integer
      submitted_at:
        type: string
      total_score:
        type: integer
    type: object
  dto.ExamSubmitAnswer:
    properties:
      option_ids:
        items:
          type: integer
        minItems: 1
        type: array
      question_id:
        type: integer
    required:
    - option_ids
    - question_id
    type: object
  dto.ExamSubmitRequest:
    properties:
      answers:
        items:
          $ref: '#/definitions/dto.ExamSubmitAnswer'
        minItems: 1
        type: array
      duration_seconds:
        type: integer
    required:
    - answers
    type: object
  dto.ExamSubmitResponse:
    properties:
      answers:
        items:
          $ref: '#/definitions/dto.ExamAnswerReview'
        type: array
      attempt_id:
        type: integer
      correct_count:
        type: integer
      duration_seconds:
        type: integer
      exam_id:
        type: integer
      pass:
        type: boolean
      score:
        type: integer
      total_count:
        type: integer
      total_score:
        type: integer
    type: object
  dto.LearningProgressRequest:
    properties:
      content_id:
        description: 内容ID
        example: 1
        type: integer
      video_position:
        description: 视频播放位置（秒），0表示文档类型或初始状态
        example: 120
        minimum: 0
        type: integer
    required:
    - content_id
    type: object
  dto.LearningProgressResponse:
    properties:
      content_id:
        description: 内容ID
        example: 1
        type: integer
      duration_seconds:
        description: 视频总时长（秒）
        example: 3600
        type: integer
      progress:
        description: 学习进度百分比（0-100）
        example: 3
        type: integer
      status:
        description: 学习状态：not_started(未开始) in_progress(进行中) completed(已完成)
        example: in_progress
        type: string
      video_position:
        description: 视频播放位置（秒）
        example: 120
        type: integer
    type: object
  dto.LoginRequest:
    properties:
      password:
        description: 密码
        example: "123456"
        type: string
      work_no:
        description: 工号
        example: E001
        type: string
    required:
    - password
    - work_no
    type: object
  dto.ManagerBrief:
    properties:
      id:
        description: 店长ID
        example: 2
        type: integer
      name:
        description: 店长姓名
        example: 李店长
        type: string
      phone:
        description: 店长手机号
        example: "13800138000"
        type: string
      work_no:
        description: 店长工号
        example: M001
        type: string
    type: object
  dto.ManagerEmployeeExamRecord:
    properties:
      employee_id:
        type: integer
      latest_exam:
        $ref: '#/definitions/dto.EmployeeLatestExamResult'
      learning_progress:
        $ref: '#/definitions/dto.EmployeeLearningProgress'
      name:
        type: string
      work_no:
        type: string
    type: object
  dto.ManagerExamOverviewResponse:
    properties:
      employees:
        items:
          $ref: '#/definitions/dto.ManagerEmployeeExamRecord'
        type: array
      exam_progress:
        items:
          $ref: '#/definitions/dto.ManagerExamProgressItem'
        type: array
    type: object
  dto.ManagerExamProgressItem:
    properties:
      attempt_count:
        type: integer
      avg_score:
        type: number
      exam_id:
        type: integer
      pass_rate:
        type: number
      title:
        type: string
    type: object
  dto.RefreshTokenRequest:
    properties:
      refresh_token:
        description: 刷新令牌
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
    required:
    - refresh_token
    type: object
  dto.RegisterRequest:
    properties:
      manager_ids:
        description: 店长工号列表
        example:
        - M001
        - M002
        items:
          type: string
        type: array
      name:
        description: 姓名
        example: 张三
        maxLength: 100
        type: string
      password:
        description: 密码（至少6位）
        example: "123456"
        minLength: 6
        type: string
      phone:
        description: 手机号
        example: "13800138000"
        maxLength: 20
        type: string
      work_no:
        description: 工号
        example: E001
        maxLength: 50
        minLength: 2
        type: string
    required:
    - manager_ids
    - password
    - work_no
    type: object
  dto.UpdateProfileRequest:
    properties:
      name:
        description: 姓名
        example: 张三
        maxLength: 100
        type: string
      phone:
        description: 手机号
        example: "13800138000"
        maxLength: 20
        type: string
    type: object
  dto.UserLearningStatsResponse:
    properties:
      completed_count:
        description: 已完成的学习内容数量
        example: 5
        type: integer
      completion_rate:
        description: 完成率（百分比）
        example: 25
        type: number
      total_contents:
        description: 该角色可见的已发布内容总数
        example: 20
        type: integer
      total_count:
        description: 已开始学习的内容总数
        example: 10
        type: integer
      user_id:
        description: 用户ID
        example: 1
        type: integer
    type: object
  dto.UserResponse:
    properties:
      id:
        description: 用户ID
        example: 1
        type: integer
      name:
        description: 姓名
        example: 张三
        type: string
      phone:
        description: 手机号
        example: "13800138000"
        type: string
      role:
        description: 角色：employee(员工) manager(店长) admin(管理员)
        example: employee
        type: string
      status:
        description: 状态：true(启用) false(禁用)
        example: true
        type: boolean
      work_no:
        description: 工号
        example: E001
        type: string
    type: object
  utils.Response:
    properties:
      code:
        type: integer
      data: {}
      message:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@example.com
    name: API Support
  description: 企业学习平台后端 API 文档
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Mini Study API
  version: 0.1.0
paths:
  /api/v1/admin/banners:
    get:
      description: 管理员可按状态筛选轮播图
      parameters:
      - description: 是否启用 true/false
        in: query
        name: status
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.BannerResponse'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员查询轮播图列表
      tags:
      - 管理后台-轮播
    post:
      consumes:
      - application/json
      description: 管理员上传图片并配置跳转链接、可见角色等信息
      parameters:
      - description: 轮播图信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminCreateBannerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.BannerResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员创建轮播图
      tags:
      - 管理后台-轮播
  /api/v1/admin/banners/{id}:
    put:
      consumes:
      - application/json
      description: 管理员可修改轮播图基础信息、状态及可见范围
      parameters:
      - description: 轮播图ID
        in: path
        name: id
        required: true
        type: integer
      - description: 轮播图信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminUpdateBannerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.BannerResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员更新轮播图
      tags:
      - 管理后台-轮播
  /api/v1/admin/contents:
    get:
      description: 管理员可按分类、类型与状态筛选内容
      parameters:
      - description: 分类ID
        in: query
        name: category_id
        type: integer
      - description: 内容类型(doc/video)
        in: query
        name: type
        type: string
      - description: 内容状态(draft/published/offline)
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.ContentResponse'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员查询内容列表
      tags:
      - 管理后台-内容
    post:
      consumes:
      - application/json
      description: 管理员上传文件并设置分类、可见角色后创建内容
      parameters:
      - description: 内容信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminCreateContentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ContentResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员创建内容
      tags:
      - 管理后台-内容
  /api/v1/admin/contents/{id}:
    put:
      consumes:
      - application/json
      description: 管理员可修改内容基础信息、状态与可见范围
      parameters:
      - description: 内容ID
        in: path
        name: id
        required: true
        type: integer
      - description: 内容信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminUpdateContentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ContentResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员更新内容
      tags:
      - 管理后台-内容
  /api/v1/admin/employees:
    post:
      consumes:
      - application/json
      description: 只有管理员可以创建新的员工账号，可同时绑定多个店长
      parameters:
      - description: 员工信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminCreateEmployeeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员创建员工
      tags:
      - 管理后台-用户
  /api/v1/admin/exams:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.ExamDetailResponse'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 管理员获取考试列表
      tags:
      - 管理端/考试
    post:
      consumes:
      - application/json
      parameters:
      - description: 考试
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminExamUpsertRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ExamDetailResponse'
              type: object
      security:
      - Bearer: []
      summary: 管理员创建考试
      tags:
      - 管理端/考试
  /api/v1/admin/exams/{id}:
    get:
      parameters:
      - description: 考试ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ExamDetailResponse'
              type: object
      security:
      - Bearer: []
      summary: 管理员获取考试详情
      tags:
      - 管理端/考试
    put:
      consumes:
      - application/json
      parameters:
      - description: 考试ID
        in: path
        name: id
        required: true
        type: integer
      - description: 考试
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminExamUpsertRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ExamDetailResponse'
              type: object
      security:
      - Bearer: []
      summary: 管理员更新考试
      tags:
      - 管理端/考试
  /api/v1/admin/managers:
    post:
      consumes:
      - application/json
      description: 只有管理员可以创建新的店长账号
      parameters:
      - description: 店长信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminCreateManagerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员创建店长
      tags:
      - 管理后台-用户
  /api/v1/admin/users:
    get:
      description: 管理员可根据角色、关键词筛选用户，并查看其店长绑定
      parameters:
      - description: 角色 employee/manager/admin
        in: query
        name: role
        type: string
      - description: 关键词（工号/姓名/手机号）
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.AdminUserResponse'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员查询用户列表
      tags:
      - 管理后台-用户
  /api/v1/admin/users/{id}:
    get:
      description: 返回指定用户的信息及店长绑定
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.AdminUserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员查询单个用户
      tags:
      - 管理后台-用户
  /api/v1/admin/users/{id}/managers:
    put:
      consumes:
      - application/json
      description: 覆盖式更新某个员工绑定的店长工号列表
      parameters:
      - description: 员工ID
        in: path
        name: id
        required: true
        type: integer
      - description: 店长工号列表
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminUpdateEmployeeManagersRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员维护员工店长绑定
      tags:
      - 管理后台-用户
  /api/v1/admin/users/{id}/promote-manager:
    post:
      description: 将指定员工升级为店长角色
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员升级店长
      tags:
      - 管理后台-用户
  /api/v1/admin/users/{id}/role:
    put:
      consumes:
      - application/json
      description: 将指定用户的角色设置为员工/店长/管理员
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 角色信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.AdminUpdateUserRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 管理员修改用户角色
      tags:
      - 管理后台-用户
  /api/v1/banners:
    get:
      description: 返回当前登录用户基于角色可见的轮播图列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.BannerResponse'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 查询可见轮播图
      tags:
      - 轮播
  /api/v1/contents:
    get:
      description: 根据分类与类型筛选当前用户可访问的已发布内容
      parameters:
      - description: 分类ID
        in: query
        name: category_id
        type: integer
      - description: 内容类型(doc/video)
        in: query
        name: type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.ContentResponse'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 查询已发布内容
      tags:
      - 内容
  /api/v1/contents/{id}:
    get:
      description: 获取指定已发布内容的详细信息
      parameters:
      - description: 内容ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ContentResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 查询内容详情
      tags:
      - 内容
  /api/v1/contents/categories:
    get:
      description: 返回当前登录用户基于角色可访问的内容分类列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.ContentCategoryResponse'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 查询可见内容分类
      tags:
      - 内容
  /api/v1/exams:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.ExamListItem'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取考试列表
      tags:
      - 考试
  /api/v1/exams/{id}:
    get:
      parameters:
      - description: 考试ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ExamDetailResponse'
              type: object
      security:
      - Bearer: []
      summary: 获取考试详情
      tags:
      - 考试
  /api/v1/exams/{id}/submit:
    post:
      consumes:
      - application/json
      parameters:
      - description: 考试ID
        in: path
        name: id
        required: true
        type: integer
      - description: 提交答案
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.ExamSubmitRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ExamSubmitResponse'
              type: object
      security:
      - Bearer: []
      summary: 提交考试作答
      tags:
      - 考试
  /api/v1/exams/my/results:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.ExamResultSummary'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 查询个人考试成绩
      tags:
      - 考试
  /api/v1/files/upload:
    post:
      consumes:
      - multipart/form-data
      description: 登录用户上传文件后返回可用于内容配置的存储路径
      parameters:
      - description: 待上传文件
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  additionalProperties:
                    type: string
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 上传文件
      tags:
      - 文件
  /api/v1/learning:
    get:
      description: 返回当前用户所有已记录的学习进度
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.LearningProgressResponse'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 查询学习进度列表
      tags:
      - 学习
    post:
      consumes:
      - application/json
      description: 登录用户上报视频播放位置，系统会累计已学进度
      parameters:
      - description: 学习进度
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.LearningProgressRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.LearningProgressResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 记录学习进度
      tags:
      - 学习
  /api/v1/learning/{content_id}:
    get:
      description: 返回当前用户在某个内容上的进度详情
      parameters:
      - description: 内容ID
        in: path
        name: content_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.LearningProgressResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 查询指定内容的学习进度
      tags:
      - 学习
  /api/v1/learning/content/{content_id}/stats:
    get:
      description: 返回指定内容的学习完成统计信息（管理员可用）
      parameters:
      - description: 内容ID
        in: path
        name: content_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ContentCompletionStatsResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 查询内容完成统计
      tags:
      - 学习
  /api/v1/learning/stats:
    get:
      description: 返回当前用户的学习完成统计信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserLearningStatsResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 查询用户学习统计
      tags:
      - 学习
  /api/v1/manager/exams/overview:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.ManagerExamOverviewResponse'
              type: object
      security:
      - Bearer: []
      summary: 店长查看员工考试与学习进度
      tags:
      - 店长
  /api/v1/users/login:
    post:
      consumes:
      - application/json
      description: 使用工号+密码登录，返回访问令牌与刷新令牌
      parameters:
      - description: 登录信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 用户登录
      tags:
      - 用户
  /api/v1/users/managers:
    get:
      description: 返回所有启用状态的店长供员工注册或绑定使用
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.UserResponse'
                  type: array
              type: object
      summary: 查询店长列表
      tags:
      - 用户
  /api/v1/users/me:
    get:
      description: 返回当前登录用户的详细信息，包括店长绑定信息（如果是员工）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.AdminUserResponse'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 获取当前用户信息
      tags:
      - 用户
  /api/v1/users/me/profile:
    patch:
      consumes:
      - application/json
      description: 登录用户可更新姓名与手机号
      parameters:
      - description: 个人信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - Bearer: []
      summary: 修改个人信息
      tags:
      - 用户
  /api/v1/users/register:
    post:
      consumes:
      - application/json
      description: 员工填写工号、姓名、手机号与密码完成注册，可同时选择多个店长工号
      parameters:
      - description: 注册信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/dto.UserResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 员工注册
      tags:
      - 用户
  /api/v1/users/token/refresh:
    post:
      consumes:
      - application/json
      description: 使用 refresh_token 换取新的访问令牌
      parameters:
      - description: 刷新令牌请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 刷新令牌
      tags:
      - 用户
  /healthz:
    get:
      description: 返回服务运行状态与当前时间
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 健康检查
      tags:
      - 系统
  /version:
    get:
      description: 返回当前部署的应用名称与版本
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 查询服务版本
      tags:
      - 系统
schemes:
- http
- https
securityDefinitions:
  Bearer:
    description: 使用 "Bearer {token}" 格式，token 通过登录接口获取
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
